!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.DeTransform=t():e.DeTransform=t()}(window,(function(){return function(e){var t={};function o(r){if(t[r])return t[r].exports;var f=t[r]={i:r,l:!1,exports:{}};return e[r].call(f.exports,f,f.exports,o),f.l=!0,f.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var f in e)o.d(r,f,function(t){return e[t]}.bind(null,f));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";function r(e){let t;if(6===e.length){let[o,r,f,n,i,l]=e;return t=o*i-n*r,[i/t,-r/t,(r*l-f*i)/t,-n/t,o/t,-(o*l-f*n)/t]}if(9===e.length){let[o,r,f,n,i,l,s,u,a]=e;return t=o*(i*a-l*u)-r*(n*a-l*s)+f*(n*u-i*s),[(i*a-l*u)/t,(f*u-r*a)/t,(r*l-f*i)/t,(l*s-n*a)/t,(o*a-f*s)/t,(f*n-o*l)/t,(n*u-i*s)/t,(r*s-o*u)/t,(o*i-r*n)/t]}if(16===e.length){let[o,r,f,n,i,l,s,u,a,p,c,d,g,y,x,m]=e,h=[];return h[0]=l*c*m-l*d*x-p*s*m+p*u*x+y*s*d-y*u*c,h[1]=-r*c*m+r*d*x+p*f*m-p*n*x-y*f*d+y*n*c,h[2]=r*s*m-r*u*x-l*f*m+l*n*x+y*f*u-y*n*s,h[3]=-r*s*d+r*u*c+l*f*d-l*n*c-p*f*u+p*n*s,h[4]=-i*c*m+i*d*x+a*s*m-a*u*x-g*s*d+g*u*c,h[5]=o*c*m-o*d*x-a*f*m+a*n*x+g*f*d-g*n*c,h[6]=-o*s*m+o*u*x+i*f*m-i*n*x-g*f*u+g*n*s,h[7]=o*s*d-o*u*c-i*f*d+i*n*c+a*f*u-a*n*s,h[8]=i*p*m-i*d*y-a*l*m+a*u*y+g*l*d-g*u*p,h[9]=-o*p*m+o*d*y+a*r*m-a*n*y-g*r*d+g*n*p,h[10]=o*l*m-o*u*y-i*r*m+i*n*y+g*r*u-g*n*l,h[11]=-o*l*d+o*u*p+i*r*d-i*n*p-a*r*u+a*n*l,h[12]=-i*p*x+i*c*y+a*l*x-a*s*y-g*l*c+g*s*p,h[13]=o*p*x-o*c*y-a*r*x+a*f*y+g*r*c-g*f*p,h[14]=-o*l*x+o*s*y+i*r*x-i*f*y-g*r*s+g*f*l,h[15]=o*l*c-o*s*p-i*r*c+i*f*p+a*r*s-a*f*l,t=o*h[0]+r*h[4]+f*h[8]+n*h[12],[h[0]/t,h[1]/t,h[2]/t,h[3]/t,h[4]/t,h[5]/t,h[6]/t,h[7]/t,h[8]/t,h[9]/t,h[10]/t,h[11]/t,h[12]/t,h[13]/t,h[14]/t,h[15]/t]}}o.r(t),o.d(t,"getOriCoordinate",(function(){return u})),o.d(t,"getOriDragDistance",(function(){return a})),o.d(t,"applyTransformAtPoint",(function(){return p}));const f=document;let n={};function i(e){let t=e&&(e.sourceEvent||e.originalEvent||e);return t&&(t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0])||t||{pageX:0,pageY:0}}function l(e){return{x:e.pageX||e.clientX+f.scrollLeft+f.body.scrollLeft,y:e.pageY||e.clientY+f.scrollTop+f.body.scrollTop}}function s(e,t,o){let r,{x:f,y:n,z:i}=e,{oriX:l,oriY:s}=t,u=t.oriZ||0;return f-=l,n-=s,i-=u,6===o.length?{x:o[0]*f+o[1]*n+o[2]+l,y:o[3]*f+o[4]*n+o[5]+s}:16===o.length?(r=o[12]*f+o[13]*n+o[14]*i+o[15],{x:(o[0]*f+o[1]*n+o[2]*i+o[3])/r+l,y:(o[4]*f+o[5]*n+o[6]*i+o[7])/r+s,z:(o[8]*f+o[9]*n+o[10]*i+o[11])/r+u,w:r}):void 0}function u(e,t,o=!1){let f,n,u,a,p,c,d,{x:g,y:y}=l(i(t)),x=e,m=[],h=0,T=0,X=!1,Y=!1,b=0,O=0;if(o&&void 0!==t.offsetX)return function(e,t){let o,r=t.offsetX,f=t.offsetY,n=0,i=0;if(e!==(t.target||t.srcElement)){n=0,i=0,o=t.target||t.srcElement;do{n+=o.offsetLeft,i+=o.offsetTop,o=o.offsetParent}while(o);o=e;do{n-=o.offsetLeft,i-=o.offsetTop,o=o.offsetParent}while(o)}return r+=n,f+=i,{x:r,y:f}}(e,t);do{if(f=window.getComputedStyle(x),("BODY"!==x.tagName&&"auto"===f.getPropertyValue("overflow")||"scroll"===f.getPropertyValue("overflow"))&&(x.scrollHeight>x.offsetHeight&&(b+=x.scrollTop),x.scrollHeight>x.offsetHeight&&(O+=x.scrollLeft)),f.getPropertyValue("transform")&&"none"!==f.getPropertyValue("transform"))if(n=f.getPropertyValue("transform-origin").split(" ").map(e=>+e.replace(/px/gi,"")),c=n[0],d=n[1],u=f.getPropertyValue("transform").split("(")[1].split(")")[0].split(",").map(e=>parseFloat(e.trim())),6===u.length){let[e,t,o,f,n,i]=u;h=0,T=0,p=x;do{h+=p.offsetLeft,T+=p.offsetTop,p=p.offsetParent}while(p);m.push({elem:x,oriX:c,oriY:d,invM:r([e,o,n,t,f,i]),matrix:[e,o,n,t,f,i],offsetLeft:h,offsetTop:T}),X=!0}else if(16===u.length){Y=!0,X=!0;let[e,t,o,r,f,n,i,l,s,a,g,y,b,O,v,P]=u;h=0,T=0,p=x;do{h+=p.offsetLeft,T+=p.offsetTop,p=p.offsetParent}while(p);m.push({elem:x,oriX:c,oriY:d,matrix:[e,f,s,b,t,n,a,O,o,i,g,v,r,l,y,P],offsetLeft:h,offsetTop:T,offsetHeight:x.offsetHeight,offsetWidth:x.offsetWidth})}x=x.parentElement}while(x);g+=O,y+=b,h=0,T=0,p=e;do{h+=p.offsetLeft,T+=p.offsetTop,p=p.offsetParent}while(p);for(;x=m.pop();)if(16===x.matrix.length){p=x;let e,t={x1:0,y1:0,x2:p.offsetWidth,y2:p.offsetHeight},o=s({x:t.x1,y:t.y1,z:1},{oriX:n[0],oriY:n[1]},p.matrix),f=s({x:t.x2,y:t.y1,z:1},{oriX:n[0],oriY:n[1]},p.matrix),i=s({x:t.x2,y:t.y2,z:1},{oriX:n[0],oriY:n[1]},p.matrix),{A:l,B:u,C:c}=(v=r([o.x,o.y,1,f.x,f.y,1,i.x,i.y,1]),P=[o.z,f.z,i.z],{A:v[0]*P[0]+v[1]*P[1]+v[2]*P[2],B:v[3]*P[0]+v[4]*P[1]+v[5]*P[2],C:v[6]*P[0]+v[7]*P[1]+v[8]*P[2]});g-=p.offsetLeft,y-=p.offsetTop,e=l*g+u*y+c,a=s({x:g,y:y,z:e},{oriX:n[0],oriY:n[1]},r(p.matrix)),g=a.x+p.offsetLeft,y=a.y+p.offsetTop,e=a.z}else 6===x.matrix.length&&(g-=x.offsetLeft,y-=x.offsetTop,a=s({x:g,y:y},{oriX:x.oriX,oriY:x.oriY},x.invM),g=a.x+x.offsetLeft,y=a.y+x.offsetTop);var v,P;return g-=h,y-=T,{x:g,y:y}}function a(e,t,o,r=!1){let f=u(e,t,r),s=0,a=0,{x:p,y:c}=l(i(t)),d=n;return f&&(p=f.x,c=f.y),"start"===o?(d._dragOX=p,d._dragOY=c):"end"===o?(s=p-d._dragOX,a=c-d._dragOY,delete d._dragOX,delete d._dragOY):(s=p-d._dragOX,a=c-d._dragOY),{dx:s,dy:a}}function p(e,t,o){let r="matrix"===t.slice(0,6).toLowerCase()&&t.split("(")[1].split(")")[0].split(",").map(e=>parseFloat(e.trim()));if(6===r.length){let[e,t,o,f,n,i]=r;r=[e,o,n,t,f,i]}else if(16===r.length){let[e,t,o,f,n,i,l,s,u,a,p,c,d,g,y,x]=r;r=[e,n,u,d,t,i,a,g,o,l,p,y,f,s,c,x]}return s(e,{oriX:o.x,oriY:o.y,oriZ:o.z||0},r)}}])}));