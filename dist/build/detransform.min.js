!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.DeTransform=t():e.DeTransform=t()}(window,(function(){return function(e){var t={};function o(r){if(t[r])return t[r].exports;var f=t[r]={i:r,l:!1,exports:{}};return e[r].call(f.exports,f,f.exports,o),f.l=!0,f.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var f in e)o.d(r,f,function(t){return e[t]}.bind(null,f));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";function r(e){let t;if(6===e.length){let[o,r,f,n,i,l]=e;return t=o*i-n*r,[i/t,-r/t,(r*l-f*i)/t,-n/t,o/t,-(o*l-f*n)/t]}if(9===e.length){let[o,r,f,n,i,l,s,u,a]=e;return t=o*(i*a-l*u)-r*(n*a-l*s)+f*(n*u-i*s),[(i*a-l*u)/t,(f*u-r*a)/t,(r*l-f*i)/t,(l*s-n*a)/t,(o*a-f*s)/t,(f*n-o*l)/t,(n*u-i*s)/t,(r*s-o*u)/t,(o*i-r*n)/t]}if(16===e.length){let[o,r,f,n,i,l,s,u,a,y,p,x,c,d,g,h]=e,m=[];return m[0]=l*p*h-l*x*g-y*s*h+y*u*g+d*s*x-d*u*p,m[1]=-r*p*h+r*x*g+y*f*h-y*n*g-d*f*x+d*n*p,m[2]=r*s*h-r*u*g-l*f*h+l*n*g+d*f*u-d*n*s,m[3]=-r*s*x+r*u*p+l*f*x-l*n*p-y*f*u+y*n*s,m[4]=-i*p*h+i*x*g+a*s*h-a*u*g-c*s*x+c*u*p,m[5]=o*p*h-o*x*g-a*f*h+a*n*g+c*f*x-c*n*p,m[6]=-o*s*h+o*u*g+i*f*h-i*n*g-c*f*u+c*n*s,m[7]=o*s*x-o*u*p-i*f*x+i*n*p+a*f*u-a*n*s,m[8]=i*y*h-i*x*d-a*l*h+a*u*d+c*l*x-c*u*y,m[9]=-o*y*h+o*x*d+a*r*h-a*n*d-c*r*x+c*n*y,m[10]=o*l*h-o*u*d-i*r*h+i*n*d+c*r*u-c*n*l,m[11]=-o*l*x+o*u*y+i*r*x-i*n*y-a*r*u+a*n*l,m[12]=-i*y*g+i*p*d+a*l*g-a*s*d-c*l*p+c*s*y,m[13]=o*y*g-o*p*d-a*r*g+a*f*d+c*r*p-c*f*y,m[14]=-o*l*g+o*s*d+i*r*g-i*f*d-c*r*s+c*f*l,m[15]=o*l*p-o*s*y-i*r*p+i*f*y+a*r*s-a*f*l,t=o*m[0]+r*m[4]+f*m[8]+n*m[12],[m[0]/t,m[1]/t,m[2]/t,m[3]/t,m[4]/t,m[5]/t,m[6]/t,m[7]/t,m[8]/t,m[9]/t,m[10]/t,m[11]/t,m[12]/t,m[13]/t,m[14]/t,m[15]/t]}}o.r(t),o.d(t,"getOriCoordinate",(function(){return u})),o.d(t,"getOriDragDistance",(function(){return a})),o.d(t,"applyTransformAtPoint",(function(){return y}));const f=document;let n={};function i(e){let t=e&&(e.sourceEvent||e.originalEvent||e);return t&&(t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0])||t||{pageX:0,pageY:0}}function l(e){return{x:e.pageX||e.clientX+f.scrollLeft+f.body.scrollLeft,y:e.pageY||e.clientY+f.scrollTop+f.body.scrollTop}}function s(e,t,o){let r,{x:f,y:n,z:i}=e,{oriX:l,oriY:s}=t,u=t.oriZ||0;return f-=l,n-=s,i-=u,6===o.length?{x:o[0]*f+o[1]*n+o[2]+l,y:o[3]*f+o[4]*n+o[5]+s}:16===o.length?(r=o[12]*f+o[13]*n+o[14]*i+o[15],{x:(o[0]*f+o[1]*n+o[2]*i+o[3])/r+l,y:(o[4]*f+o[5]*n+o[6]*i+o[7])/r+s,z:(o[8]*f+o[9]*n+o[10]*i+o[11])/r+u,w:r}):void 0}function u(e,t,o=!1){let f,n,u,a,y,p,x,{x:c,y:d}=l(i(t)),g=e,h=[],m=0,z=0,X=0,Y=0,b=function(e){let t=0,o=0,r=e;do{t+=r.offsetLeft,o+=r.offsetTop,r=r.offsetParent}while(r);return{left:t,top:o,right:t+e.offsetWidth,bottom:o+e.offsetHeight}}(e),T=[{x:b.left,y:b.top,z:1},{x:b.right,y:b.top,z:1},{x:b.right,y:b.bottom,z:1},{x:b.left,y:b.bottom,z:1}];if(o&&void 0!==t.offsetX)return function(e,t){let o,r=t.offsetX,f=t.offsetY,n=0,i=0;if(e!==(t.target||t.srcElement)){n=0,i=0,o=t.target||t.srcElement;do{n+=o.offsetLeft,i+=o.offsetTop,o=o.offsetParent}while(o);o=e;do{n-=o.offsetLeft,i-=o.offsetTop,o=o.offsetParent}while(o)}return r+=n,f+=i,{x:r,y:f}}(e,t);do{if(f=window.getComputedStyle(g),("BODY"!==g.tagName&&"auto"===f.getPropertyValue("overflow")||"scroll"===f.getPropertyValue("overflow"))&&(g.scrollHeight>g.offsetHeight&&(X+=g.scrollTop),g.scrollHeight>g.offsetHeight&&(Y+=g.scrollLeft)),f.getPropertyValue("transform")&&"none"!==f.getPropertyValue("transform"))if(n=f.getPropertyValue("transform-origin").split(" ").map(e=>+e.replace(/px/gi,"")),p=n[0],x=n[1],u=f.getPropertyValue("transform").split("(")[1].split(")")[0].split(",").map(e=>parseFloat(e.trim())),6===u.length){let[e,t,o,f,i,l]=u,a=[e,o,i,t,f,l];m=0,z=0,y=g;do{m+=y.offsetLeft,z+=y.offsetTop,y=y.offsetParent}while(y);let c=s({x:T[0].x-m,y:T[0].y-z},{oriX:n[0],oriY:n[1]},a),d=s({x:T[1].x-m,y:T[1].y-z},{oriX:n[0],oriY:n[1]},a),X=s({x:T[2].x-m,y:T[2].y-z},{oriX:n[0],oriY:n[1]},a),Y=s({x:T[3].x-m,y:T[3].y-z},{oriX:n[0],oriY:n[1]},a);T[0].x=c.x+m,T[0].y=c.y+z,T[1].x=d.x+m,T[1].y=d.y+z,T[2].x=X.x+m,T[2].y=X.y+z,T[3].x=Y.x+m,T[3].y=Y.y+z,h.push({elem:g,oriX:p,oriY:x,invM:r(a),matrix:a,offsetLeft:m,offsetTop:z})}else if(16===u.length){let[e,t,o,r,f,i,l,a,c,d,X,Y,b,O,v,P]=u,w=[e,f,c,b,t,i,d,O,o,l,X,v,r,a,Y,P];m=0,z=0,y=g;do{m+=y.offsetLeft,z+=y.offsetTop,y=y.offsetParent}while(y);let L=s({x:T[0].x-m,y:T[0].y-z,z:T[0].z},{oriX:n[0],oriY:n[1]},w),_=s({x:T[1].x-m,y:T[1].y-z,z:T[1].z},{oriX:n[0],oriY:n[1]},w),j=s({x:T[2].x-m,y:T[2].y-z,z:T[2].z},{oriX:n[0],oriY:n[1]},w),H=s({x:T[3].x-m,y:T[3].y-z,z:T[3].z},{oriX:n[0],oriY:n[1]},w);T[0].x=L.x+m,T[0].y=L.y+z,T[0].z=L.z,T[1].x=_.x+m,T[1].y=_.y+z,T[1].z=_.z,T[2].x=j.x+m,T[2].y=j.y+z,T[2].z=j.z,T[3].x=H.x+m,T[3].y=H.y+z,T[3].z=H.z,h.push({elem:g,oriX:p,oriY:x,matrix:[e,f,c,b,t,i,d,O,o,l,X,v,r,a,Y,P],offsetLeft:m,offsetTop:z,offsetHeight:g.offsetHeight,offsetWidth:g.offsetWidth})}g=g.parentElement}while(g);c+=Y,d+=X,m=b.left,z=b.top;let O,{A:v,B:P,C:w}=(L=r([T[0].x,T[0].y,1,T[1].x,T[1].y,1,T[2].x,T[2].y,1]),_=[T[0].z,T[1].z,T[2].z],{A:L[0]*_[0]+L[1]*_[1]+L[2]*_[2],B:L[3]*_[0]+L[4]*_[1]+L[5]*_[2],C:L[6]*_[0]+L[7]*_[1]+L[8]*_[2]});var L,_;for(O=v*c+P*d+w;g=h.pop();)16===g.matrix.length?(y=g,c-=y.offsetLeft,d-=y.offsetTop,a=s({x:c,y:d,z:O},{oriX:n[0],oriY:n[1]},r(y.matrix)),c=a.x+y.offsetLeft,d=a.y+y.offsetTop,O=a.z):6===g.matrix.length&&(c-=g.offsetLeft,d-=g.offsetTop,a=s({x:c,y:d},{oriX:g.oriX,oriY:g.oriY},g.invM),c=a.x+g.offsetLeft,d=a.y+g.offsetTop);return c-=m,d-=z,{x:c,y:d}}function a(e,t,o,r=!1){let f=u(e,t,r),s=0,a=0,{x:y,y:p}=l(i(t)),x=n;return f&&(y=f.x,p=f.y),"start"===o?(x._dragOX=y,x._dragOY=p):"end"===o?(s=y-x._dragOX,a=p-x._dragOY,delete x._dragOX,delete x._dragOY):(s=y-x._dragOX,a=p-x._dragOY),{dx:s,dy:a}}function y(e,t,o){let r="matrix"===t.slice(0,6).toLowerCase()&&t.split("(")[1].split(")")[0].split(",").map(e=>parseFloat(e.trim()));if(6===r.length){let[e,t,o,f,n,i]=r;r=[e,o,n,t,f,i]}else if(16===r.length){let[e,t,o,f,n,i,l,s,u,a,y,p,x,c,d,g]=r;r=[e,n,u,x,t,i,a,c,o,l,y,d,f,s,p,g]}return s(e,{oriX:o.x,oriY:o.y,oriZ:o.z||0},r)}}])}));