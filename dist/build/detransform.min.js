!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.DeTransform=t():e.DeTransform=t()}(window,(function(){return function(e){var t={};function o(r){if(t[r])return t[r].exports;var f=t[r]={i:r,l:!1,exports:{}};return e[r].call(f.exports,f,f.exports,o),f.l=!0,f.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var f in e)o.d(r,f,function(t){return e[t]}.bind(null,f));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";function r(e){let t;if(6===e.length){let[o,r,f,n,i,l]=e;return t=o*i-n*r,[i/t,-r/t,(r*l-f*i)/t,-n/t,o/t,-(o*l-f*n)/t]}if(9===e.length){let[o,r,f,n,i,l,s,u,y]=e;return t=o*(i*y-l*u)-r*(n*y-l*s)+f*(n*u-i*s),[(i*y-l*u)/t,(f*u-r*y)/t,(r*l-f*i)/t,(l*s-n*y)/t,(o*y-f*s)/t,(f*n-o*l)/t,(n*u-i*s)/t,(r*s-o*u)/t,(o*i-r*n)/t]}if(16===e.length){let[o,r,f,n,i,l,s,u,y,a,p,x,c,g,d,m]=e,h=[];return h[0]=l*p*m-l*x*d-a*s*m+a*u*d+g*s*x-g*u*p,h[1]=-r*p*m+r*x*d+a*f*m-a*n*d-g*f*x+g*n*p,h[2]=r*s*m-r*u*d-l*f*m+l*n*d+g*f*u-g*n*s,h[3]=-r*s*x+r*u*p+l*f*x-l*n*p-a*f*u+a*n*s,h[4]=-i*p*m+i*x*d+y*s*m-y*u*d-c*s*x+c*u*p,h[5]=o*p*m-o*x*d-y*f*m+y*n*d+c*f*x-c*n*p,h[6]=-o*s*m+o*u*d+i*f*m-i*n*d-c*f*u+c*n*s,h[7]=o*s*x-o*u*p-i*f*x+i*n*p+y*f*u-y*n*s,h[8]=i*a*m-i*x*g-y*l*m+y*u*g+c*l*x-c*u*a,h[9]=-o*a*m+o*x*g+y*r*m-y*n*g-c*r*x+c*n*a,h[10]=o*l*m-o*u*g-i*r*m+i*n*g+c*r*u-c*n*l,h[11]=-o*l*x+o*u*a+i*r*x-i*n*a-y*r*u+y*n*l,h[12]=-i*a*d+i*p*g+y*l*d-y*s*g-c*l*p+c*s*a,h[13]=o*a*d-o*p*g-y*r*d+y*f*g+c*r*p-c*f*a,h[14]=-o*l*d+o*s*g+i*r*d-i*f*g-c*r*s+c*f*l,h[15]=o*l*p-o*s*a-i*r*p+i*f*a+y*r*s-y*f*l,t=o*h[0]+r*h[4]+f*h[8]+n*h[12],[h[0]/t,h[1]/t,h[2]/t,h[3]/t,h[4]/t,h[5]/t,h[6]/t,h[7]/t,h[8]/t,h[9]/t,h[10]/t,h[11]/t,h[12]/t,h[13]/t,h[14]/t,h[15]/t]}}o.r(t),o.d(t,"getOriCoordinate",(function(){return y})),o.d(t,"getOriDragDistance",(function(){return a})),o.d(t,"applyTransformAtPoint",(function(){return p}));const f=document;let n={};function i(e){let t=e&&(e.sourceEvent||e.originalEvent||e);return t&&(t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0])||t||{pageX:0,pageY:0}}function l(e){return{x:e.pageX||e.clientX+f.scrollLeft+f.body.scrollLeft,y:e.pageY||e.clientY+f.scrollTop+f.body.scrollTop}}function s(e,t,o){let r,{x:f,y:n,z:i}=e,{oriX:l,oriY:s}=t,u=t.oriZ||0;return f-=l,n-=s,i-=u,6===o.length?{x:o[0]*f+o[1]*n+o[2]+l,y:o[3]*f+o[4]*n+o[5]+s}:16===o.length?(r=o[12]*f+o[13]*n+o[14]*i+o[15],{x:(o[0]*f+o[1]*n+o[2]*i+o[3])/r+l,y:(o[4]*f+o[5]*n+o[6]*i+o[7])/r+s,z:(o[8]*f+o[9]*n+o[10]*i+o[11])/r+u,w:r}):void 0}function u(e){let t=0,o=0,r=e;do{t+=r.offsetLeft,o+=r.offsetTop,r=r.offsetParent}while(r);return{left:t,top:o,right:t+e.offsetWidth,bottom:o+e.offsetHeight}}function y(e,t,o=!1){let f,n,y,a,p,x,c,g,{x:d,y:m}=l(i(t)),h=e,z=[],X=0,Y=0,b=0,T=0,O=u(e),v=[{x:O.left,y:O.top,z:1},{x:O.right,y:O.top,z:1},{x:O.right,y:O.bottom,z:1},{x:O.left,y:O.bottom,z:1}];if(o&&void 0!==t.offsetX)return function(e,t){let o,r=t.offsetX,f=t.offsetY,n=0,i=0;if(e!==(t.target||t.srcElement)){n=0,i=0,o=t.target||t.srcElement;do{n+=o.offsetLeft,i+=o.offsetTop,o=o.offsetParent}while(o);o=e;do{n-=o.offsetLeft,i-=o.offsetTop,o=o.offsetParent}while(o)}return r+=n,f+=i,{x:r,y:f}}(e,t);do{if(f=window.getComputedStyle(h),("BODY"!==h.tagName&&"auto"===f.getPropertyValue("overflow")||"scroll"===f.getPropertyValue("overflow"))&&(h.scrollHeight>h.offsetHeight&&(b+=h.scrollTop),h.scrollHeight>h.offsetHeight&&(T+=h.scrollLeft)),f.getPropertyValue("transform")&&"none"!==f.getPropertyValue("transform"))if(n=f.getPropertyValue("transform-origin").split(" ").map(e=>+e.replace(/px/gi,"")),x=n[0],c=n[1],y=f.getPropertyValue("transform").split("(")[1].split(")")[0].split(",").map(e=>parseFloat(e.trim())),6===y.length){let[e,t,o,f,i,l]=y,a=[e,o,i,t,f,l];g=u(h),X=g.left,Y=g.top;let p=s({x:v[0].x-X,y:v[0].y-Y},{oriX:n[0],oriY:n[1]},a),d=s({x:v[1].x-X,y:v[1].y-Y},{oriX:n[0],oriY:n[1]},a),m=s({x:v[2].x-X,y:v[2].y-Y},{oriX:n[0],oriY:n[1]},a),b=s({x:v[3].x-X,y:v[3].y-Y},{oriX:n[0],oriY:n[1]},a);v[0].x=p.x+X,v[0].y=p.y+Y,v[1].x=d.x+X,v[1].y=d.y+Y,v[2].x=m.x+X,v[2].y=m.y+Y,v[3].x=b.x+X,v[3].y=b.y+Y,z.push({elem:h,oriX:x,oriY:c,invM:r(a),matrix:a,offsetLeft:X,offsetTop:Y})}else if(16===y.length){let[e,t,o,r,f,i,l,a,p,d,m,b,T,O,P,_]=y,w=[e,f,p,T,t,i,d,O,o,l,m,P,r,a,b,_];g=u(h),X=g.left,Y=g.top;let L=s({x:v[0].x-X,y:v[0].y-Y,z:v[0].z},{oriX:n[0],oriY:n[1]},w),j=s({x:v[1].x-X,y:v[1].y-Y,z:v[1].z},{oriX:n[0],oriY:n[1]},w),H=s({x:v[2].x-X,y:v[2].y-Y,z:v[2].z},{oriX:n[0],oriY:n[1]},w),M=s({x:v[3].x-X,y:v[3].y-Y,z:v[3].z},{oriX:n[0],oriY:n[1]},w);v[0].x=L.x+X,v[0].y=L.y+Y,v[0].z=L.z,v[1].x=j.x+X,v[1].y=j.y+Y,v[1].z=j.z,v[2].x=H.x+X,v[2].y=H.y+Y,v[2].z=H.z,v[3].x=M.x+X,v[3].y=M.y+Y,v[3].z=M.z,z.push({elem:h,oriX:x,oriY:c,matrix:w,offsetLeft:X,offsetTop:Y,offsetHeight:h.offsetHeight,offsetWidth:h.offsetWidth})}h=h.parentElement}while(h);d+=T,m+=b,X=O.left,Y=O.top;let P,{A:_,B:w,C:L}=(j=r([v[0].x,v[0].y,1,v[1].x,v[1].y,1,v[2].x,v[2].y,1]),H=[v[0].z,v[1].z,v[2].z],{A:j[0]*H[0]+j[1]*H[1]+j[2]*H[2],B:j[3]*H[0]+j[4]*H[1]+j[5]*H[2],C:j[6]*H[0]+j[7]*H[1]+j[8]*H[2]});var j,H;for(P=_*d+w*m+L;h=z.pop();)16===h.matrix.length?(p=h,d-=p.offsetLeft,m-=p.offsetTop,a=s({x:d,y:m,z:P},{oriX:n[0],oriY:n[1]},r(p.matrix)),d=a.x+p.offsetLeft,m=a.y+p.offsetTop,P=a.z):6===h.matrix.length&&(d-=h.offsetLeft,m-=h.offsetTop,a=s({x:d,y:m},{oriX:h.oriX,oriY:h.oriY},h.invM),d=a.x+h.offsetLeft,m=a.y+h.offsetTop);return d-=X,m-=Y,{x:d,y:m}}function a(e,t,o,r=!1){let f=y(e,t,r),s=0,u=0,{x:a,y:p}=l(i(t)),x=n;return f&&(a=f.x,p=f.y),"start"===o?(x._dragOX=a,x._dragOY=p):"end"===o?(s=a-x._dragOX,u=p-x._dragOY,delete x._dragOX,delete x._dragOY):(s=a-x._dragOX,u=p-x._dragOY),{dx:s,dy:u}}function p(e,t,o){let r="matrix"===t.slice(0,6).toLowerCase()&&t.split("(")[1].split(")")[0].split(",").map(e=>parseFloat(e.trim()));if(6===r.length){let[e,t,o,f,n,i]=r;r=[e,o,n,t,f,i]}else if(16===r.length){let[e,t,o,f,n,i,l,s,u,y,a,p,x,c,g,d]=r;r=[e,n,u,x,t,i,y,c,o,l,a,g,f,s,p,d]}return s(e,{oriX:o.x,oriY:o.y,oriZ:o.z||0},r)}}])}));